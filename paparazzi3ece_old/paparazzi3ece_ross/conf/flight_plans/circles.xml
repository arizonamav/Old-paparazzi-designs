

<procedure>
  <param name="rad" default_value="75"/>
  <param name="vz" default_value="1"/>
  <param name="top" default_value="GROUND_ALT+150"/>
  <param name="bottom"/>

  <waypoints>
    <waypoint name="center" x="0" y="0" alt="0"/>
  </waypoints>

  <blocks>
    <block NAME="climb">
      <exception COND="(RcEvent1())" DEROUTE="palier"/>
      <circle WP="center" RADIUS="rad" vmode="climb" climb="vz" until="estimator_z > top"/>
    </block>

    <block NAME="palier">
      <exception COND="(RcEvent1())" DEROUTE="down"/>
      <circle WP="center" RADIUS="rad" alt="top" until="stage_time > 60"/>
    </block>

    <block NAME="down">
      <exception COND="(RcEvent1())" DEROUTE="palier_bot"/>
      <circle WP="center" RADIUS="rad" vmode="climb" climb="-(vz)" until="GROUND_ALT+50 > estimator_z"/>
    </block>

    <block NAME="palier_bot">
      <exception COND="(RcEvent1())" DEROUTE="event1"/>
      <circle WP="center" RADIUS="rad" alt="bottom"/>
   </block>

  </blocks>
</procedure>
